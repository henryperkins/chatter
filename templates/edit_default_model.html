{% extends "base.html" %}

{% block title %}Edit Default Model Configuration{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-4">Edit Default Model Configuration</h1>

    {% if model_error %}
    <div class="bg-red-100 dark:bg-red-900/50 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-200 px-4 py-3 rounded-lg relative mb-6" role="alert">
        <strong class="font-bold">Error:</strong>
        <span class="block sm:inline">{{ model_error }}</span>
    </div>
    {% endif %}

    <form method="POST" action="{{ url_for('auth.edit_default_model') }}" class="space-y-6">
        {{ form.hidden_tag() }}

        <!-- Model Name -->
        <div class="space-y-1">
            {{ form.name.label(class="block font-medium text-gray-700 dark:text-gray-300") }}
            {{ form.name(class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200") }}
            {% if form.name.errors %}
            <p class="text-red-600 dark:text-red-400 text-sm">{{ form.name.errors[0] }}</p>
            {% endif %}
        </div>

        <!-- Deployment Name -->
        <div class="space-y-1">
            {{ form.deployment_name.label(class="block font-medium text-gray-700 dark:text-gray-300") }}
            {{ form.deployment_name(class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200") }}
            {% if form.deployment_name.errors %}
            <p class="text-red-600 dark:text-red-400 text-sm">{{ form.deployment_name.errors[0] }}</p>
            {% endif %}
        </div>

        <!-- Include similar blocks for each field in the form -->

        <!-- Submit Button -->
        <button type="submit"
                class="w-full px-6 py-3 text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transform hover:scale-[1.02] transition-all duration-200">
            Save Configuration
        </button>
    </form>
</div>

{% block scripts %}
{{ super() }}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const requiresO1HandlingCheckbox = document.getElementById('requires_o1_handling');
        const temperatureField = document.getElementById('temperature');

        function toggleTemperatureField() {
            if (requiresO1HandlingCheckbox.checked) {
                temperatureField.value = '1.0';
                temperatureField.disabled = true;
            } else {
                temperatureField.disabled = false;
            }
        }

        requiresO1HandlingCheckbox.addEventListener('change', toggleTemperatureField);
        toggleTemperatureField();  // Initialize on page load
    });
</script>
{% endblock %}
